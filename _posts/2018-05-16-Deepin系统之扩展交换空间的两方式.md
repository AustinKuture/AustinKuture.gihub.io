---
layout: post
title: Linux系统之扩展交换分区的两方式
categories:
  - Linux
description: Linux系统之扩展交换分区的两方式
keywords: Linux,Deepin,交换空间,扩展交换空间,交换分区
comments: true
---


# Linux系统之扩展交换分区的两种方式
> 适用系统（手动修改swap文件的方式）：Deepin、Ubuntu、CentOS

> 调试系统： Deepin 15.5


* 这里所说的交换分区与交换空间是同一个概念，本篇文章主要讲解如何手动与软件管理的方式，通过添加swap文件来扩展现有的交换分区。
* 交换分区是什么呢？其实就是类似windows的虚拟内存，在内存不够的时候，用磁盘临时保存部分内存。常常有人说用chrome或者java程序，内存不够，系统卡死。其实系统卡死很大原因就是因为磁盘IO卡死的原因，这里面内存交换就会导致大量磁盘IO，或者内存频繁交换也导致的程序卡死。内核里有两个功能模块zswap和zram具有很好的增强交换分区的功能。开启之后，电脑就不卡了，chrome开20+网页也不是梦了，什么IDE，java程序随心跑（学着大牛们也吹的夸张些）

### 手动添加Swap文件
安装完Linux再划分交换分区是可以的，有两种方式：一种是当硬盘上还有未分配空间时，在未分配空间划分出交换分区；还有一种方式是建立一个swap文件作为交换空间，这种方式是最简便的，因为Linux系统上可以同时有多个swap（可以用swapon -s命令可以看到系统上所有的swap，用free命令看到的是swap总共的大小），所以swap不够用时可以再用文件的方式再建立一个swap。

**接下来以10G大小的文件为例介绍如何用文件建立内存交换空间：**
##### 查看当前系统中所有的swap分区
打开终端输入以下命令：
```
swapon -s
```
>或者swapon -f


![Swap00](/images/posts/Linux/Swap00.png)

> 当前系统在安装时已经划分了8G的交换分区，所以默认会有一个7.6G的交换空间

未新增交换空间效果如下：
![Swap01](/images/posts/Linux/Swap01.png)

#### 1. 使用dd命令在某个目录下新建一个10G的文件
```
dd if=/dev/zero of=/tmp/swap/ bs=1M count=10240
```
> 命令解释：1M 是单位， 10240是数量，合计10240M即10G

>为了演示在/tmp下创建的swap文件，重启后会丢失，实际使用时建议换成其他目录。 
![Swap02](/images/posts/Linux/Swap02.png)


#### 2. 

---
layout: post
title: 人脸特征点置信度算法
categories:
  - 人工智能
description: 人脸特征点置信度算法
keywords: 'LandMark, 人脸特征点置信度, 置信度, Facial LandMark, Confidence Ceofficient' 
comments: true
---

# 人脸特征点置信度算法

使用训练好的模型进行人脸特征点标记的时候，经常会生成一些特征点标记不准确、顺序错误或散乱的数据，每次标记完成后还要再经过人工进行筛选，特别耗时，少量数据还好，对于大数据集来说简直就是灾难。针对此种情况，根据人脸面部特征的规律现总结出一个算法用来计算特征点的置信度，给它起名叫FCC\\(Facial Landmark Confidence Coefficient\\)人脸置信度系数。该算法可以粗略的判断出模型标记的人脸特征点是否正确，使用人工标记的数据对算法进行测试，其有效识别率在95%左右。为了提高算法的可靠性又加入了两个辅助系数，CER和IER。在辅助系数的共同作用下有效识别率在97.65%以上。目前该算法还有待优化，有效识别率为97.65%也就意味着误判率为3左右%，每100张就有3张误判，每10000张误判数量就会高达300张。如果使用这些数据再进行其他网络的训练就会影响新模型的准确度。为了尽可能降低算法的误判率，我们可以对系数范围进行微调。例如 0.85 &lt; FCC &lt;= 1.9 识别率为97.65%，而 0.82 &lt; FCC &lt;= 2.3 时，可以将有效识别率提高至98.6%。这样做也有一个风险，强行扩大系数范围虽然能够少量提高有效识别率，但却使得有效识别的数据极有可能存在伪数据，所以在不同的场景下想要微调系数还需斟酌。

在讲解算法之前先看一张图，如下图所示（非专业绘画，勉强一观吧）。图中的眼睛位置以我们为参考，其中 L 代表左眼，R 代表右眼， n 代表鼻子下方的人中，m 代表嘴巴，下表是其点的序号。左右眼各8点，人中5点，嘴巴4点。
![](/images/posts/AI/fcc11.png)

## 一、 FCC\(Facial Landmark Confidence Coefficient)
### 1. 人中中点与眼睛的系数

NC = mean($$n_i$$)i$$\in$$[1, 5]
$$E_1$$ = $$\sqrt[2]{NC^2+[mean(L_i)i\in[1,2]]^2}$$
$$E_2$$ = $$\sqrt[2]{NC^2+[mean(R_i)i\in[1,2]]^2}$$
$$E_3$$ = $$\sqrt[2]{NC^2+[mean(L_i)i\in[1,8]]^2}$$
$$E_4$$ = $$\sqrt[2]{NC^2+[mean(R_i)i\in[1,8]]^2}$$
* NC为人中5点的均值坐标，或者称为人中的中点坐标
* $$E_i$$是NC到左右眼的各均值点的距离
**Eye Coefficient = $$\frac{1}{4}\displaystyle \sum^{4}_{i=1}$$**









